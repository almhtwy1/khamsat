// ==UserScript==
// @name         Khamsat Comment Count Fast Updater
// @namespace    http://tampermonkey.net/
// @version      1.1
// @description  Faster update of comment counts for both initial and dynamically loaded topics
// @author       Joe
// @match        https://khamsat.com/community/requests*
// @grant        none
// ==/UserScript==

function _0x168c(_0x4a4347,_0x120595){const _0x4c02a9=_0x4c02();return _0x168c=function(_0x168c6d,_0x4041e4){_0x168c6d=_0x168c6d-0x165;let _0x14b77b=_0x4c02a9[_0x168c6d];return _0x14b77b;},_0x168c(_0x4a4347,_0x120595);}(function(_0x23b634,_0x34d967){const _0xdaa91f=_0x168c,_0x20d4ce=_0x23b634();while(!![]){try{const _0x8e5baf=parseInt(_0xdaa91f(0x169))/0x1*(-parseInt(_0xdaa91f(0x16f))/0x2)+-parseInt(_0xdaa91f(0x16c))/0x3*(parseInt(_0xdaa91f(0x196))/0x4)+-parseInt(_0xdaa91f(0x18f))/0x5+-parseInt(_0xdaa91f(0x166))/0x6*(parseInt(_0xdaa91f(0x16b))/0x7)+parseInt(_0xdaa91f(0x16a))/0x8*(-parseInt(_0xdaa91f(0x186))/0x9)+-parseInt(_0xdaa91f(0x179))/0xa+-parseInt(_0xdaa91f(0x189))/0xb*(-parseInt(_0xdaa91f(0x199))/0xc);if(_0x8e5baf===_0x34d967)break;else _0x20d4ce['push'](_0x20d4ce['shift']());}catch(_0x53d859){_0x20d4ce['push'](_0x20d4ce['shift']());}}}(_0x4c02,0x7ffc3),(async function(){'use strict';const _0x5c342a=_0x168c;async function _0x43c967(_0x487468){const _0x86a6fa=_0x168c;try{const _0x41dae2=_0x487468[_0x86a6fa(0x18c)](_0x86a6fa(0x174)),_0x37b1b9=new URL(_0x41dae2,window['location'][_0x86a6fa(0x17c)]);console[_0x86a6fa(0x16d)](_0x86a6fa(0x18b),_0x37b1b9['href']);const _0x4cb45f=await fetch(_0x37b1b9[_0x86a6fa(0x174)]);if(!_0x4cb45f['ok'])throw new Error(_0x86a6fa(0x183)+_0x4cb45f[_0x86a6fa(0x193)]);const _0x3cff9b=await _0x4cb45f['text'](),_0x580cf5=new DOMParser(),_0x66ee62=_0x580cf5['parseFromString'](_0x3cff9b,_0x86a6fa(0x168)),_0x2ba8db=_0x66ee62[_0x86a6fa(0x197)](_0x86a6fa(0x17b));if(!_0x2ba8db){console[_0x86a6fa(0x184)](_0x86a6fa(0x17a),_0x37b1b9[_0x86a6fa(0x174)]);return;}const _0xbda4ff=_0x2ba8db[_0x86a6fa(0x198)][_0x86a6fa(0x17e)](/\((\d+)/);if(_0xbda4ff){const _0x5614f4=_0xbda4ff[0x1],_0x4637cd=_0x487468['querySelector'](_0x86a6fa(0x173));if(_0x4637cd)_0x4637cd[_0x86a6fa(0x198)]='\x20('+_0x5614f4+'\x20تعليقات)';else{const _0x146151=document[_0x86a6fa(0x194)](_0x86a6fa(0x170));_0x146151[_0x86a6fa(0x177)]='comments-count',_0x146151['style'][_0x86a6fa(0x172)]=_0x86a6fa(0x18e),_0x146151['style'][_0x86a6fa(0x192)]=_0x86a6fa(0x165),_0x146151[_0x86a6fa(0x181)][_0x86a6fa(0x185)]=_0x86a6fa(0x175),_0x146151['textContent']='\x20('+_0x5614f4+_0x86a6fa(0x187),_0x487468[_0x86a6fa(0x176)](_0x146151);}}else console[_0x86a6fa(0x184)](_0x86a6fa(0x182),_0x37b1b9[_0x86a6fa(0x174)]);}catch(_0x201240){console['error'](_0x86a6fa(0x178),_0x487468,_0x201240);}}function _0x1e6a14(_0x46704f=document){const _0x27ad93=_0x168c,_0x359b39=_0x46704f[_0x27ad93(0x171)](_0x27ad93(0x191));_0x359b39['forEach'](_0x36333b=>{const _0x841cfa=_0x27ad93;_0x36333b[_0x841cfa(0x18d)](_0x841cfa(0x195),_0x841cfa(0x167)),_0x43c967(_0x36333b);});}_0x1e6a14();const _0x566fb5=new MutationObserver(_0x289061=>{_0x289061['forEach'](_0x580dbf=>{_0x580dbf['addedNodes']['forEach'](_0x3d6fc8=>{const _0x504220=_0x168c;if(_0x3d6fc8[_0x504220(0x17d)]!==Node[_0x504220(0x16e)])return;_0x3d6fc8['matches']&&_0x3d6fc8['matches'](_0x504220(0x191))?(_0x3d6fc8[_0x504220(0x18d)]('data-processed',_0x504220(0x167)),_0x43c967(_0x3d6fc8)):_0x1e6a14(_0x3d6fc8);});});});_0x566fb5[_0x5c342a(0x17f)](document[_0x5c342a(0x18a)],{'childList':!![],'subtree':!![]});const _0x4528c4=document[_0x5c342a(0x190)]('community_loadmore_btn');_0x4528c4&&_0x4528c4[_0x5c342a(0x188)](_0x5c342a(0x180),()=>{setTimeout(()=>_0x1e6a14(),0x1f4);});}()));function _0x4c02(){const _0x47a565=['23966LJtpRR','span','querySelectorAll','color','span.comments-count','href','5px','appendChild','className','Error\x20processing\x20anchor:','1996200EZUMZK','Comment\x20header\x20not\x20found\x20for','div.card-header.bg-white\x20h3','origin','nodeType','match','observe','click','style','No\x20comment\x20count\x20found\x20in\x20header\x20for','HTTP\x20error:\x20','warn','marginLeft','18HXFSXE','\x20تعليقات)','addEventListener','198OvqCtN','body','Fetching:','getAttribute','setAttribute','rgb(255,\x2069,\x200)','3233455JSXkzl','getElementById','a.ajaxbtn:not([data-processed])','fontWeight','status','createElement','data-processed','246556tgfHUH','querySelector','textContent','2355036gHHwAt','bold','5021274aYnBML','true','text/html','5ymFKVk','2102216rInCHM','7XsKTcu','36HmIrgv','log','ELEMENT_NODE'];_0x4c02=function(){return _0x47a565;};return _0x4c02();}
